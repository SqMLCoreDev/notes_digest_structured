# =============================================================================
# NOTES ENGINE - UNIFIED ENVIRONMENT CONFIGURATION
# =============================================================================
# This file contains configuration for both Chatbot and NotesDigest services
# Copy this file to .env and fill in your values

# =============================================================================
# COMMON CONFIGURATION (Used by both services)
# =============================================================================

# Application Settings
APP_NAME=Notes Engine API
APP_VERSION=1.0.0
DEBUG=false
ENVIRONMENT=development  # development, staging, production

# AWS Credentials
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here
AWS_REGION=us-east-1

# Claude/Bedrock Model Configuration
CLAUDE_SONNET_3_5=us.anthropic.claude-3-5-sonnet-20241022-v2:0
CLAUDE_HAIKU_3_5=us.anthropic.claude-3-5-haiku-20241022-v1:0
CLAUDE_HAIKU_4_5=us.anthropic.claude-haiku-4-5-20251001-v1:0
CLAUDE_OPUS_4_1=us.anthropic.claude-opus-4-1-20250805-v1:0
MISTRAL_7_B=mistral.mistral-7b-instruct-v0:2

# Active model to use
MODEL=CLAUDE_HAIKU_4_5
MAX_TOKENS=100000

# Elasticsearch Configuration
ES_URL=https://your-elasticsearch-cluster:9200
ES_USER=elastic
ES_PASSWORD=your_password_here
ES_ENCODED_AUTH=base64_encoded_credentials

# CORS
CORS_ORIGINS=*

# =============================================================================
# CHATBOT CONFIGURATION
# =============================================================================

# User access control mapping index
MAPPING_INDEX=chatbotconfiguration_data

# Redis Cache Configuration (recommended for production and multiple sessions)
REDIS_URL=redis://redis:6379/0
MAX_RESPONSES_PER_SESSION=30
CACHE_TTL_SECONDS=3600

# PostgreSQL for conversation history and embeddings
POSTGRES_CONNECTION=postgresql+psycopg://user:password@host:5432/database

# =============================================================================
# NOTESDIGEST CONFIGURATION
# =============================================================================

# Elasticsearch Indices
ES_INDEX_CLINICAL_NOTES=tiamd_clinical_notes
ES_INDEX_PROCESSED_NOTES=tiamd_processed_notes
ES_INDEX_NOTES_DIGEST=tiamd_notes_digest
ES_INDEX_TOKEN_USAGE=tiamd_notes_token_usage

# Processing Configuration
N_PREVIOUS_VISITS=1

# API Configuration
API_BASE_URL=https://your-api-endpoint/api/tiamd
API_NOTE_HEADER_TOKEN=your_api_token

# Concurrency Configuration
MAX_CONCURRENT_NOTES=10
MAX_QUEUE_SIZE=20
NOTE_PROCESSING_TIMEOUT=1800
BEDROCK_RATE_LIMIT_RPS=30

# =============================================================================
# EMBEDDINGS & VECTOR DATABASE CONFIGURATION
# =============================================================================

# Collection name for vector embeddings
COLLECTION_NAME=clinical_notes_embeddings

# Embeddings model (Amazon Titan)
EMBEDDINGS_MODEL=amazon.titan-embed-text-v2:0